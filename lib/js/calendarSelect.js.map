{"version":3,"sources":["../../src/js/calendarSelect.jsx"],"names":["CalendarSelect","props","state","viewMode","currentYear","parseInt","calendarMonth","split","nextProps","showCalendar","setState","date","minDate","maxDate","isDateEnable","selectDate","type","unit","calendarChange","val","month","className","lang","weekdays","monthList","isCurrentMonth","ym","yearList","Array","fill","yearMonthChange","changeView","map","day","key","calendarArray","item","ymd","indexOf","changeMonthOrYear","Component"],"mappings":"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","file":"calendarSelect.js","sourcesContent":["import React from 'react';\nimport CommonFn from './commonFn';\nimport moment from 'moment';\n\nexport default class CalendarSelect extends React.Component {\n\n  constructor(props) {\n    super(props);\n    this.state = {\n      viewMode: 'day',\n      currentYear: parseInt(props.calendarMonth.split('-')[0], 10),\n    };\n  }\n\n  componentWillReceiveProps(nextProps) {\n    if (!nextProps.showCalendar && this.props.showCalendar) {\n      this.setState({\n        viewMode: 'day',\n      })\n    }\n  }\n\n  // 日期是否可用\n  isDateEnable(date) {\n    const { minDate, maxDate } = this.props;\n    return date >= minDate && date <= maxDate;\n  }\n\n  // 选择日期\n  selectDate(date) {\n    if (this.isDateEnable(date)) {\n      this.props.selectDate(date);\n    }\n  }\n\n  //左右月份年份icon\n  yearMonthChange(type, unit) {\n    let { viewMode, currentYear } = this.state;\n    if (viewMode === 'day') {\n      this.props.calendarChange(type, unit);\n    } else {\n      this.setState({\n        currentYear: currentYear + (type < 0 ? -12 : 12),\n      });\n    }\n  }\n\n  // 视图修改\n  changeView(type) {\n    this.state.viewMode !== type && this.setState({\n      viewMode: type,\n    });\n  }\n\n  // 选择月份\n  changeMonthOrYear(val, unit) {\n    const type = unit === 'month' ?\n      val - moment(this.props.calendarMonth).month()\n      : this.state.currentYear + val - parseInt(this.props.calendarMonth.split('-')[0], 10);\n    this.props.calendarChange(type, unit);\n    this.setState({\n      viewMode: 'day',\n    });\n  }\n\n  render() {\n    const {\n      calendarMonth,\n      date,\n      className,\n      lang,\n    } = this.props;\n    const {\n      viewMode,\n      currentYear,\n    } = this.state;\n    const weekdays = lang === 'zh-cn' ?\n      ['日', '一', '二', '三', '四', '五', '六']\n      : ['Sun', 'Mon', 'Tus', 'Wes', 'Thu', 'Fri', 'Sat'];\n    const monthList = lang === 'zh-cn' ?\n      ['一月', '二月', '三月', '四月', '五月', '六月', '七月', '八月', '九月', '十月', '十一月', '十二月']\n      : ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];\n    const isCurrentMonth = calendarMonth === CommonFn.ym();\n    const yearList = new Array(16).fill(0);\n    return (\n      <div className={className}>\n        <div className=\"header-section\">\n          {viewMode !== 'month' &&\n            <span className=\"prev-year fa fa-backward\" onClick={() => this.yearMonthChange(-1, 'year')} />\n          }\n          {viewMode === 'day' &&\n            <span className=\"prev-month fa fa-caret-left\" onClick={() => this.yearMonthChange(-1, 'month')} />\n          }\n          {viewMode === 'day' &&\n            <span className=\"next-month fa fa-caret-right\" onClick={() => this.yearMonthChange(1, 'month')} />\n          }\n          {viewMode !== 'month' &&\n            <span className=\"next-year fa fa-forward\" onClick={() => this.yearMonthChange(1, 'year')} />\n          }\n          <span className=\"year-selector\">\n            <span className=\"current\" onClick={() => this.changeView('year')}>\n              {calendarMonth.split('-')[0]}{lang === 'zh-cn' && '年'}\n            </span>\n          </span>\n          <span className=\"month-selector\">\n            <span className=\"current\" onClick={() => this.changeView('month')}>\n              {calendarMonth.split('-')[1]}{lang === 'zh-cn' && '月'}\n            </span>\n          </span>\n        </div>\n        <div className=\"calender-section\">\n          {viewMode === 'day' && weekdays.map((day, key) =>\n            <div\n              key={key}\n              className=\"date-weekday\"\n            >{day}</div>\n          )}\n          {viewMode === 'day' && CommonFn.calendarArray(calendarMonth).map((item, key) =>\n            <div\n              key={key}\n              className={`date-item ${date && CommonFn.ymd(date) === item ? 'selected' : ''} ${item.indexOf(calendarMonth) !== 0 ? 'not-current-month' : ''} ${isCurrentMonth && CommonFn.ymd() === item ? 'current-day' : '' }`}\n              onClick={() => this.selectDate(item)}\n            >{item.split('-')[2]}</div>\n          )}\n          {viewMode === 'month' && monthList.map((month, key) =>\n            <div\n              key={key}\n              className=\"month-item\"\n              onClick={() => this.changeMonthOrYear(key, 'month')}\n            >\n              {month}\n            </div>\n          )}\n          {viewMode === 'year' && monthList.map((month, key) =>\n            <div\n              key={key}\n              className=\"month-item\"\n              onClick={() => this.changeMonthOrYear(key, 'year')}\n            >\n              {currentYear + key}\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n"]}