{"version":3,"sources":["../../src/js/index.jsx"],"names":["DateRange","props","state","format","date","undefined","minDate","ymd","maxDate","yearMonth","ym","showCalendar","placeholder","needTime","lang","dateCallback","bind","type","setState","unit","add","val","yearMonthDayArr","split","set","year","parseInt","month","changeDate","formatDate","dateSectionDisplay","selectDate","item","calendarChange","selectTime","Component"],"mappings":"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","file":"index.js","sourcesContent":["import React from 'react';\nimport moment from 'moment';\nimport CommonFn from './commonFn';\nimport CalendarSelect from './calendarSelect';\nimport TimeSelect from './timeSelect';\nimport 'font-awesome/css/font-awesome.css';\nimport '../assets/style/main.css';\n\nexport default class DateRange extends React.Component {\n\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      format: props.format || 'x', // 日期格式\n      date: moment(props.date || undefined),\n      minDate: CommonFn.ymd(props.minDate || '1900-01-01'),\n      maxDate: CommonFn.ymd(props.maxDate || '2200-01-01'),\n      yearMonth: CommonFn.ym(props.date), // 默认开始月份\n      showCalendar: false, // 是否显示日历\n      placeholder: props.placeholder || `YYYY-MM-DD${props.needTime ? ' HH:mm' : ''}`,\n      lang: props.lang === 'zh-cn' ? 'zh-cn' : 'en',\n      needTime: props.needTime || false,\n    };\n\n    this.dateCallback = this.dateCallback.bind(this);\n  }\n\n  // 显示、隐藏日历\n  dateSectionDisplay(type) {\n    const { showCalendar } = this.state;\n    if (showCalendar !== (type === 'show')) {\n      this.setState({\n        showCalendar: type === 'show',\n      });\n    }\n  }\n\n  // 修改日历显示的年月\n  calendarChange(type, unit) {\n    this.setState({\n      yearMonth: moment(this.state.yearMonth).add(type, unit).format('YYYY-MM'),\n    });\n  }\n\n  // 点击日历日期，选择日期\n  selectDate(val) {\n    const { date, needTime } = this.state;\n    const yearMonthDayArr = val.split('-');\n    this.setState({\n      date: moment(date).set({\n        year: parseInt(yearMonthDayArr[0], 10),\n        month: parseInt(yearMonthDayArr[1], 10) - 1,\n        date: parseInt(yearMonthDayArr[2], 10),\n      }),\n    }, () => {\n      !needTime && this.dateCallback();\n    });\n  }\n\n  // 点击日历时间，选择时间\n  selectTime(date) {\n    this.setState({\n      date,\n    });\n  }\n\n  // 回调组件外部方法，传出修改\n  dateCallback() {\n    const { changeDate, format } = this.props;\n    const { date } = this.state;\n    changeDate && changeDate(moment(date).set('millisecond', 0).format(format));\n    this.setState({\n      showCalendar: false,\n    });\n  }\n\n  render() {\n    const {\n      minDate,\n      maxDate,\n      date,\n      yearMonth,\n      showCalendar,\n      placeholder,\n      lang,\n      needTime\n    } = this.state;\n\n    const formatDate = this.props.date ? moment(this.props.date).format(needTime ? 'YYYY-MM-DD HH:mm' : 'YYYY-MM-DD') : '';\n\n    return (\n      <div className=\"date-range-body\">\n        <div\n          className=\"input-section\"\n          onClick={() => this.dateSectionDisplay('show')}\n        >\n          <input type=\"text\" className=\"time-input\" value={formatDate} placeholder={placeholder} />\n        </div>\n\n        <div\n          className={`date-section ${showCalendar && 'date-section-show'}`}\n        >\n          <CalendarSelect\n            className=\"date-select-section\"\n            calendarMonth={yearMonth}\n            date={date.format('YYYY-MM-DD')}\n            minDate={minDate}\n            maxDate={maxDate}\n            lang={lang}\n            showCalendar={showCalendar}\n            selectDate={item => this.selectDate(item)}\n            calendarChange={(type, unit) => this.calendarChange(type, unit, 'start')}\n          />\n        </div>\n        <div\n          className={`time-section ${showCalendar && needTime ? ' time-section-show' : ''}`}\n        >\n          <TimeSelect\n            date={date}\n            minDate={minDate}\n            maxDate={maxDate}\n            selectTime={item => this.selectTime(item)}\n            lang={lang}\n            onOk={() => this.dateCallback()}\n          />\n        </div>\n        {showCalendar &&\n        <div className=\"bg-for-close\" onClick={() => this.dateSectionDisplay('hide')} />\n        }\n      </div>\n    );\n  }\n}\n"]}